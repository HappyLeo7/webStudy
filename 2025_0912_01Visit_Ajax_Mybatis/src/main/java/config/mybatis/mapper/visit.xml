<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="visit">

	<!-- 전체조회 -->
 	<select id="visit_list" resultType="visit">
 		select * from visit order by idx desc
 	</select>
 	
 	<!-- 검색조회 -->
  <select id="visit_list_condition" resultType="visit" parameterType="Map">
	select * from visit
	<trim prefix="where" prefixOverrides="or">
		<if test="name!=null">
			name like '%'||#{name}||'%'
		</if>
		<if test="content!=null">
			or content like '%' || #{content} || '%'
		</if>
	</trim>  
	order by idx desc
  </select>
  
  <!-- 추가하기 -->						    <!-- 타입경로 -->
  	<insert id="visit_insert" parameterType="db.vo.VisitVo">
  		insert into visit values(seq_visit_idx.nextVal
						  		,#{name}
						  		,#{content}
						  		,#{pwd}
						  		,#{ip}
						  		,sysdate)
  	</insert>
  	<!-- 삭제하기 -->
  	<delete id="visit_delete" parameterType="int">
  		delete from visit where idx=#{idx}
  	</delete>

	<!-- 1개 조회 -->
	<select id="visit_selectOne" parameterType="int" resultType="db.vo.VisitVo">
		select * from visit where idx=#{idx}
	</select>
	
	<!-- 수정하기 -->
	<update id="visit_update" parameterType="db.vo.VisitVo">
		update visit set name=#{name}
						,content=#{content}
						,pwd=#{pwd}
						,ip=#{ip}
		where idx=#{idx}
	</update>
</mapper>












